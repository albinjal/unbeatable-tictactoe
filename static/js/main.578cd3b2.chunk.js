(this.webpackJsonptictactoe=this.webpackJsonptictactoe||[]).push([[0],{24:function(e,t,n){e.exports=n(37)},29:function(e,t,n){},31:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var r,a=n(0),o=n.n(a),i=n(5),c=n.n(i),l=(n(29),n(16)),s=n.n(l),u=(n(31),n(2)),f=n.n(u),h=n(4),d=n(7),b=n(22),v=n(17);!function(e){e[e.Cross=1]="Cross",e[e.Circle=-1]="Circle",e[e.Neutral=0]="Neutral"}(r||(r={}));var m,p,w=function(e){return e===r.Circle?r.Cross:r.Circle},g=function e(t,n){var a=this;Object(v.a)(this,e),this.tiles=void 0,this.playerTurn=void 0,this.done=!1,this.winner=r.Neutral,this.width=3,this.heigth=3,this.totalTiles=this.width*this.heigth,this.getTotalTiles=function(){return a.totalTiles},this.okMoves=function(){var e=[];return a.tiles.forEach((function(t,n){t===r.Neutral&&e.push(n)})),e},this.makeMove=function(t){var n=Object(b.a)(a.tiles);return n[t]=a.playerTurn,new e(a.otherPlayer(),n)},this.otherPlayer=function(){return w(a.playerTurn)},this.checkForGameOver=function(){(a.winner=a.wonGame())?a.done=!0:a.done=a.full()},this.full=function(){return 0===a.okMoves().length},this.wonGame=function(){var e=a.rowWin();if(e)return e;var t=a.colWin();if(t)return t;var n=a.dia1Win();return n||a.dia2Win()},this.rowWin=function(){for(var e=a.getTotalTiles()-a.width,t=0;t<=e;t+=a.width){var n=a.tiles[t];if(n!==r.Neutral)for(var o=t+a.width-1,i=0;i<=o;i++){var c=t+i;if(a.tiles[c]!==n)break;if(c===o)return n}}return r.Neutral},this.colWin=function(){for(var e=a.getTotalTiles(),t=0;t<a.width;t++){var n=a.tiles[t];if(n!==r.Neutral)for(var o=e-a.width+t,i=a.width;i<=o;i+=a.width){var c=t+i;if(a.tiles[c]!==n)break;if(c===o)return n}}return r.Neutral},this.dia1Win=function(){for(var e=a.tiles[0],t=a.getTotalTiles(),n=a.width+1;n<t;n+=a.width+1)if(a.tiles[n]!==e)return r.Neutral;return e},this.dia2Win=function(){for(var e=a.width-1,t=a.tiles[e],n=a.getTotalTiles(),o=2*e;o<=n-a.width;o+=e)if(a.tiles[o]!==t)return r.Neutral;return t},this.playerTurn=t,n?(this.tiles=n,this.checkForGameOver()):this.tiles=new Array(this.getTotalTiles()).fill(r.Neutral)},k=n(13),y=(m={},Object(k.a)(m,r.Neutral,"bg-soft-white"),Object(k.a)(m,r.Circle,"bg-red-800"),Object(k.a)(m,r.Cross,"bg-green-700"),m),x=function(e){var t=e.state,n=e.onClick;return o.a.createElement("button",{onClick:n,className:"border-8 focus:outline-none font-bold text-4xl md:text-6xl border-prussian-blue text-white ".concat(y[t])},t?t===r.Cross?"X":"O":null)},T=function(e){var t=e.board,n=e.makeMove;return o.a.createElement("div",{className:"grid grid-rows-3 grid-cols-3 bg- w-bvw0 h-bvw0 md:w-bvw1 md:h-bvw1 border-4 border-prussian-blue bg-soft-white"},t.tiles.map((function(e,t){return o.a.createElement(x,{state:e,key:t,onClick:function(){return n(t)}})})))},O=n(14),E=function(){var e=Object(h.a)(f.a.mark((function e(t){var n,r,a,o,i,c,l,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.time("BestMove"),n=t.okMoves().map((function(e){return[t.playerTurn*j(t.makeMove(e)),e]})),r=-1/0,a=[],o=Object(O.a)(n),e.prev=5,o.s();case 7:if((i=o.n()).done){e.next=19;break}if(c=i.value,!((l=c[0])>r)){e.next=14;break}return a=[c[1]],r=l,e.abrupt("continue",17);case 14:if(l!==r){e.next=17;break}return a.push(c[1]),e.abrupt("continue",17);case 17:e.next=7;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(5),o.e(e.t0);case 24:return e.prev=24,o.f(),e.finish(24);case 27:return console.log(n),s=Math.floor(Math.random()*a.length),console.timeEnd("BestMove"),e.abrupt("return",a[s]);case 31:case"end":return e.stop()}}),e,null,[[5,21,24,27]])})));return function(t){return e.apply(this,arguments)}}(),j=function e(t){if(t.done)return t.winner;var n,r=t.otherPlayer(),a=Object(O.a)(t.okMoves());try{for(a.s();!(n=a.n()).done;){var o=n.value,i=e(t.makeMove(o));i*t.playerTurn>r*t.playerTurn&&(r=i)}}catch(c){a.e(c)}finally{a.f()}return r},N=n(52),C=function(e){var t=e.boardState,n=e.botDelayOn,r=e.switchBotDelay;return o.a.createElement("div",{className:"flex flex-col p-4 items-center bg-honeydew shadow rounded m-2 w-full max-w-md border"},o.a.createElement("h1",{className:"text-3xl text-center font-light"},"Unbeatable TicTacToe"),o.a.createElement("hr",{className:"border-t w-4/5 my-1 border-celadon-blue"}),o.a.createElement("h3",{className:"font-extrabold ".concat(t.playerTurn===P?"text-green-700":"text-red-800")},t.playerTurn===P?"Your":"Bot"," turn"),o.a.createElement("hr",{className:"border-t w-4/5 my-1 border-celadon-blue"}),o.a.createElement("span",null,o.a.createElement(N.a,{checked:n,onChange:function(e){return r(e.target.checked)}}),"Bot Delayed"))},W=function(e){var t=e.message;return o.a.createElement("div",{className:"flex justify-center"},o.a.createElement("span",{className:"fixed bottom-0"},o.a.createElement("p",{className:"text-center p-3 px-6 m-4 rounded-full text-lg font-semibold shadow bg-imperial-red text-honeydew opacity-75"},t)))},M=function(e){var t=e.message;e.type;return o.a.createElement(W,{message:t})};!function(e){e[e.Default=0]="Default"}(p||(p={}));var S=o.a.createContext({openSnackbar:function(){var e=Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",void 0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),D={type:p.Default,open:!1,message:""},B=function(e){var t=e.children,n=Object(a.useState)(D),r=Object(d.a)(n,2),i=r[0],c=r[1],l=function(){var e=Object(h.a)(f.a.mark((function e(t){var n,r,a=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:p.Default,r=a.length>2&&void 0!==a[2]?a[2]:6e3,e.abrupt("return",new Promise((function(e){c({message:t,type:n,open:!0}),setTimeout((function(){s(),e()}),r)})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=function(){c(D)};return o.a.createElement(S.Provider,{value:{openSnackbar:l}},t,i.open?o.a.createElement(M,{message:i.message,type:i.type}):null)},P=r.Cross,A=function(){var e=Object(a.useState)(P),t=Object(d.a)(e,2),n=t[0],i=t[1],c=Object(a.useState)(new g(n)),l=Object(d.a)(c,2),s=l[0],u=l[1],b=Object(a.useState)(!0),v=Object(d.a)(b,2),m=v[0],p=v[1],k=Object(a.useContext)(S).openSnackbar,y=Object(a.useCallback)((function(){u(new g(n)),i(w(n))}),[n]),x=Object(a.useCallback)((function(){k("Game Over. ".concat(s.winner?"Bot Won":"Draw","!")),setTimeout(y,1e3)}),[s.winner,k,y]),O=Object(a.useCallback)((function(e){u(s.makeMove(e))}),[s]),j=Object(a.useCallback)(Object(h.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(s);case 2:t=e.sent,setTimeout((function(){O(t)}),m?700:0);case 4:case"end":return e.stop()}}),e)}))),[s,m,O]);Object(a.useEffect)((function(){s.done?x():s.playerTurn===w(P)&&j()}),[s,j,x]);return o.a.createElement("div",{className:"flex w-full flex-wrap justify-center items-center flex-grow"},o.a.createElement(T,{board:s,makeMove:function(e){s.playerTurn===P&&s.tiles[e]===r.Neutral&&O(e)}}),o.a.createElement(C,{boardState:s,switchBotDelay:function(e){p(e)},botDelayOn:m}))},G=function(){return o.a.createElement(B,null,o.a.createElement("div",{className:"bg-dark-blue flex flex-col min-h-screen"},o.a.createElement(s.a,{href:"https://github.com/albinjal/unbeatable-tictactoe",octoColor:"#21252b",bannerColor:"#fff"}),o.a.createElement(A,null)))},U=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function R(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(G,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/unbeatable-tictactoe",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/unbeatable-tictactoe","/service-worker.js");U?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):R(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):R(t,e)}))}}()}},[[24,1,2]]]);
//# sourceMappingURL=main.578cd3b2.chunk.js.map